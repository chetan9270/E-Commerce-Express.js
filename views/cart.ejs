<%- include("./partials/header") %>

<div class="w-full min-h-screen px-20 py-10">

    <h1 class="text-3xl font-semibold mb-8">Your Cart</h1>

    <!-- If cart is empty -->
    <% if (!user || !user.cart || user.cart.length === 0) { %>
        <div class="text-xl text-gray-500">Your cart is empty.</div>
    <% } else { %>

        <div class="grid grid-cols-3 gap-8">

            <% user.cart.forEach(product => { %>

                <div class="w-full border rounded-md shadow-md overflow-hidden bg-white">

                    <!-- IMAGE SECTION -->
                    <div class="w-full h-64 bg-gray-200 flex items-center justify-center">

                        <% if (product.Image) { %>
                            <img 
                                src="data:image/png;base64,<%= product.Image.toString('base64') %>"
                                class="w-full h-full object-cover"
                                alt="<%= product.Name %>"
                            >
                        <% } else { %>
                            <span class="text-gray-500">No Image</span>
                        <% } %>

                    </div>

                    <!-- PRODUCT DETAILS -->
                    <div class="p-4">
                        <h2 class="text-2xl font-semibold"><%= product.Name %></h2>
                        <p class="text-lg mt-2">â‚¹ <%= product.Price %></p>

                        <form action="/remove-from-cart/<%= product._id %>" method="POST">
                            <button 
                                class="mt-4 bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-md">
                                Remove
                            </button>
                        </form>

                    </div>
                </div>

            <% }); %>

        </div>

    <% } %>

</div>

<%- include("./partials/footer") %>
